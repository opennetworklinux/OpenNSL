<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenNSL API Guide and Reference Manual: Use Case Examples</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen/doxygen_brcm.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenNSL API Guide and Reference Manual
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li class="current"><a href="pages.html"><span>OpenNSL&#160;Documentation</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Use Case Examples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This section presents simple use cases that can be implemented using the OpenNSL APIs.</p>
<h2><a class="anchor" id="OPENNSL_EXAMPLE_L2_FIREWALL"></a>
Layer2 Firewall</h2>
<p>This example demonstrates a simple Layer 2 Firewall use case, where a network administrator can block unauthorized stations from accessing the network. The match criteria for the firewall rules can be either source MAC address or destination MAC address. Frames matching the firewall rule can either be dropped or forwarded. A centralized firewall server can maintain the firewall rules for all the Layer2 switches in the network. If the match criteria is source MAC address, packets originating with that MAC address are matched. If the match criteria is destination MAC address, packets destined to that MAC address are matched.</p>
<p>This application supports Warm Boot.</p>
<p>The figure below illustrates a simple Layer2 firewall application. There are 2 switches and 4 stations in the network. The firewall server can configure the network switch 1 to block station A but allow station B.</p>
<div class="image">
<img src="OpenNSLLayer2Firewall.jpg" alt="OpenNSLLayer2Firewall.jpg"/>
<div class="caption">
Figure 1</div></div>
<p> The OpenNSL Layer2 address management functions provide the ability to install MAC entries in the forwarding database. Each of the MAC entries can be enabled to discard incoming frames based on the source or destination hit. The entries added by firewall must be configured with STATIC flag to prevent ageing of the entry. The following L2 flags are defined to meet the requirements of firewall.</p>
<ul>
<li><b>OPENNSL_L2_STATIC</b> </li>
<li><b>OPENNSL_L2_DISCARD_SRC</b> </li>
<li><b>OPENNSL_L2_DISCARD_DST</b> </li>
</ul>
<p>The network switch can also be configured to send unknown L2 packets (source lookup failures and destination lookup failure) to the firewall server. The server can apply policy rules to allow or deny the specific stations. The 'example_l2_firewall' application when launched provides an interactive user menu, where user can select "Apply firewall" option to block any traffic originated from or destined to station A with MAC address 00:00:00:00:00:01 and station D with MAC address 00:00:00:00:00:04. Selecting "Remove firewall" option allows the traffic originated from or destinated to station A and station D.</p>
<h2><a class="anchor" id="OPENNSL_EXAMPLE_STP"></a>
Spanning Tree</h2>
<p>Spanning tree protocol prevents loops between bridges/switches, when connected by a network of redundant paths. This example demonstrates on how to remove a loop by modifying the spanning tree state of a port.</p>
<p>This example application takes two port numbers as input, puts them under the same vlan(100), and sets them in forwarding mode. If both these ports are connected to a partner switch with the connecting ports in forwarding state, it results in a loop. This application interactively lets the user to set the state of any of the ports input by the user to either blocking or forwarding state.. Once the ports' states have been set by the user, a simple traffic test can be used to demonstrate the presence [or absence] of loops based on the ports' configured state. The user also has an option to display the current 'state' of ports using the interactive menu provided by the application.</p>
<div class="image">
<img src="OpenNSL_STG.jpg" alt="OpenNSL_STG.jpg"/>
<div class="caption">
Figure 2</div></div>
<p> STP runs as a state machine in which a port can be in any of the following states: </p>
<ul>
<li><b>Disable</b> <em></em>[OPENNSL_STG_STP_DISABLE] </li>
<li><b>Block</b> <em></em>[OPENNSL_STG_STP_BLOCK] </li>
<li><b>Listen</b> <em></em>[OPENNSL_STG_STP_LISTEN] </li>
<li><b>Learn</b> <em></em>[OPENNSL_STG_STP_LEARN] </li>
<li><b>Forward</b> <em></em>[OPENNSL_STG_STP_FORWARD]</li>
</ul>
<p>This example application demonstrates the usage of FORWARD and BLOCK states and the behavior of ports in each of these cases.</p>
<h2><a class="anchor" id="OPENNSL_EXAMPLE_ROUTING"></a>
Routing</h2>
<p>L3 routing is based on subnet match. All packets with destination IP addresses belonging to the same subnet are routed to the same outgoing interface. The L3 interface is a virtual interface corresponding to a particular routed VLAN and has an associated IP address and MAC address. In the L3 API, an L3 interface is identified by a numeric value.</p>
<p>This application requests the user to enter the ingress and egress port numbers. Using the host route, it routes the packets arrived on ingress port to host attached to egress port that is a member of another VLAN.</p>
<p>This application supports Warm Boot.</p>
<h2><a class="anchor" id="OPENNSL_EXAMPLE_BST"></a>
Buffer Statistics Tracking</h2>
<p>Buffer Statistics Tracking (BST) enables the user to monitor and observe buffer statistics across the device. Specifically, the feature provides visibility across the set of counters used to determine admission control for incoming traffic.</p>
<p>This example demonstrates displaying and clearing of buffer statisticss for a given interface. It takes port number as input from the user interactively and provides options to display or clear statistics for that port.</p>
<p>This example application displays only a subset of statistical counters supported by the system. The entire list of types of statistics supported and maintained is listed under the following enumeration type: 'opennsl_cosq_bst_profile_t'</p>
<h2><a class="anchor" id="OPENNSL_EXAMPLE_TRUNK"></a>
Trunking</h2>
<p>Trunking, or Link aggregation, is a mechanism that allows several ports to be bundled together to form a single logical link or trunk. This is useful when higher bandwidth or redundancy between switches, or both, are required.</p>
<p>The 'example_trunk' application provides a simple demonstration of the APIs present. The interactive menu allows the user to create a trunk, add and delete members and see the contents of a trunk. A demonstration traffic can be used to see the division of incoming packets into trunk member ports.</p>
<p>This application supports Warm Boot.</p>
<h2><a class="anchor" id="OPENNSL_EXAMPLE_KNET"></a>
KNET</h2>
<p>The Kernel Network (KNET) module provides a software connector that forwards packets to and from the native network interfaces of the operating system. The KNET module maps the packet streams from the the network interfaces to OpenNSL transmit APIs.</p>
<p>This 'example_knet' application creates KNET interfaces that can be configrable from linux shell. The interactive user menu allows the user to assign IP address to an interface using KNET interface options and try to reach it with a device connected to the interface on same subnet. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->


<!--BEGIN GENERATE_TREEVIEW -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->

<hr>
<p>	
<table class="footer-brcm">
	<tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align=left></td>
		<td class="footer-brcm"><small><b>&copy;  2015 by Broadcom Corporation. All rights reserved.</b></small>
			<div class="footer-brcm"><small>Broadcom Corporation reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design. 
Information furnished by Broadcom Corporation is believed to be accurate and reliable. However, Broadcom Corporation does not assume any liability arising 
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license 
under its patent rights nor the rights of others. </small>
			</div>
		</td>
	</tr>
</table>	
</p>	
	

</div>

<!--END GENERATE_TREEVIEW-->





</body>
</html>
