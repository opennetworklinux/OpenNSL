<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenNSL API Guide and Reference Manual: examples/example_bst.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen/doxygen_brcm.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenNSL API Guide and Reference Manual
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li><a href="pages.html"><span>OpenNSL&#160;Documentation</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">examples/example_bst.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="example__bst_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*********************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> *</span>
<a name="l00003"></a>00003 <span class="comment"> * (C) Copyright Broadcom Corporation 2013-2015</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<a name="l00006"></a>00006 <span class="comment"> *  you may not use this file except in compliance with the License.</span>
<a name="l00007"></a>00007 <span class="comment"> *  You may obtain a copy of the License at</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> *      http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> *  Unless required by applicable law or agreed to in writing, software</span>
<a name="l00012"></a>00012 <span class="comment"> *  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00013"></a>00013 <span class="comment"> *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00014"></a>00014 <span class="comment"> *  See the License for the specific language governing permissions and</span>
<a name="l00015"></a>00015 <span class="comment"> *  limitations under the License.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> **********************************************************************</span>
<a name="l00018"></a>00018 <span class="comment"> *</span>
<a name="l00019"></a>00019 <span class="comment"> * \file         example_bst.c</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * \brief        OpenNSL example program for showing statistics</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * \details      OpenNSL example program for displaying and clearing BST</span>
<a name="l00024"></a>00024 <span class="comment"> *               statistics of a given interface.</span>
<a name="l00025"></a>00025 <span class="comment"> *</span>
<a name="l00026"></a>00026 <span class="comment"> **********************************************************************/</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="commdefs_8h.html">sal/commdefs.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="opennsl_2error_8h.html">opennsl/error.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="cosq_8h.html">opennsl/cosq.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="vlan_8h.html">opennsl/vlan.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="opennsl_2switch_8h.html">opennsl/switch.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="driver_8h.html">sal/driver.h</a>&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;<a class="code" href="examples_2util_8h.html">examples/util.h</a>&gt;</span>
<a name="l00037"></a>00037 
<a name="l00038"></a><a class="code" href="example__bst_8c.html#a91668ed1245d073a2ac84e6121205d28">00038</a> <span class="preprocessor">#define DEFAULT_VLAN 1</span>
<a name="l00039"></a><a class="code" href="example__bst_8c.html#ae561a2dab8025f585c77571f67d4771e">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_COUNTERS 4</span>
<a name="l00040"></a><a class="code" href="example__bst_8c.html#a20c3efb1df0911d9071bd4f9bf129acc">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_COSQ_COUNT 8</span>
<a name="l00041"></a><a class="code" href="example__bst_8c.html#adbb76aecfc5eef000cb4cb55bc2fd404">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define DEFAULT_UNIT 0</span>
<a name="l00042"></a><a class="code" href="example__bst_8c.html#a068278b0838b6670ab0ab0a93ed77484">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_DIGITS_IN_CHOICE 5</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a><a class="code" href="example__bst_8c.html#afc7d01e6dbea2c820a68fb8081c58a89">00044</a> <span class="keywordtype">char</span> <a class="code" href="example__bst_8c.html#afc7d01e6dbea2c820a68fb8081c58a89">example_usage</a>[] =
<a name="l00045"></a>00045 <span class="stringliteral">&quot;Syntax: example_bst                                                   \n\r&quot;</span>
<a name="l00046"></a>00046 <span class="stringliteral">&quot;                                                                      \n\r&quot;</span>
<a name="l00047"></a>00047 <span class="stringliteral">&quot;Paramaters: None                                                      \n\r&quot;</span>
<a name="l00048"></a>00048 <span class="stringliteral">&quot;                                                                      \n\r&quot;</span>
<a name="l00049"></a>00049 <span class="stringliteral">&quot;Example: The following command is used to see the bst stats of a port \n\r&quot;</span>
<a name="l00050"></a>00050 <span class="stringliteral">&quot;         example_bst                                                  \n\r&quot;</span>
<a name="l00051"></a>00051 <span class="stringliteral">&quot;                                                                      \n\r&quot;</span>
<a name="l00052"></a>00052 <span class="stringliteral">&quot;Usage Guidelines: This program request the user to enter the port     \n\r&quot;</span>
<a name="l00053"></a>00053 <span class="stringliteral">&quot;                  number interactively                                \n\r&quot;</span>;
<a name="l00054"></a>00054 
<a name="l00055"></a><a class="code" href="structexample__bst__counter__t.html">00055</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00056"></a><a class="code" href="structexample__bst__counter__t.html#ab0d7d61d949076d1ded723ecedf58e72">00056</a>   <a class="code" href="group__cosq.html#ga24cdfbab33b9fe855b3887ae58ee05b8" title="BST Tracing statistics resources type eumerations.">opennsl_bst_stat_id_t</a> <a class="code" href="structexample__bst__counter__t.html#ab0d7d61d949076d1ded723ecedf58e72">bid</a>;
<a name="l00057"></a><a class="code" href="structexample__bst__counter__t.html#af82e6dc4d77a60c363a248a494753608">00057</a>   <span class="keywordtype">char</span> name[50];
<a name="l00058"></a>00058 } <a class="code" href="structexample__bst__counter__t.html">example_bst_counter_t</a>;
<a name="l00059"></a>00059 <span class="comment">/* __doxy_func_body_end__ */</span>
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="comment">/*****************************************************************/</span>
<a name="l00069"></a>00069 <span class="comment">/* Main function for BST application */</span>
<a name="l00070"></a><a class="code" href="example__bst_8c.html#a0ddf1224851353fc92bfbff6f499fa97">00070</a> <span class="keywordtype">int</span> <a class="code" href="example__bst_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main function for bst sample application.">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])
<a name="l00071"></a>00071 {
<a name="l00072"></a>00072   <a class="code" href="group__error.html#gac798c5c818a3213c27d2900d47add7f9" title="OPENNSL API error codes.">opennsl_error_t</a>   rc;
<a name="l00073"></a>00073   <span class="keywordtype">int</span> choice;
<a name="l00074"></a>00074   <span class="keywordtype">int</span> unit = <a class="code" href="example__bst_8c.html#adbb76aecfc5eef000cb4cb55bc2fd404">DEFAULT_UNIT</a>;
<a name="l00075"></a>00075   <span class="keywordtype">int</span> index,i,j;
<a name="l00076"></a>00076   <a class="code" href="group__types.html#ga238c767c6c5b6a0a47dd9d1504936cf0" title="GPORT (generic port) definitions.">opennsl_gport_t</a> gport;
<a name="l00077"></a>00077   <a class="code" href="group__types.html#gacaeba2b4ddbc89b0e556720a9388885f" title="Set the default tag protocol ID (TPID) for the specified port.">opennsl_port_t</a> port;
<a name="l00078"></a>00078   <a class="code" href="group__types.html#gaf746bf383c3bd5c9de4bb442727a6405" title="opennsl_cos_queue_t">opennsl_cos_queue_t</a> cosq;
<a name="l00079"></a>00079   <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> options = 0;
<a name="l00080"></a>00080   <a class="code" href="structexample__bst__counter__t.html">example_bst_counter_t</a> id_list[<a class="code" href="example__bst_8c.html#ae561a2dab8025f585c77571f67d4771e">MAX_COUNTERS</a>] = {
<a name="l00081"></a>00081     {<a class="code" href="group__cosq.html#ggad2513b2cc3002680ce77d18a8b879e1fa3415972065e03b511eae195823824f1c" title="BST Tracing resource for unicast.">opennslBstStatIdUcast</a>,            <span class="stringliteral">&quot;opennslBstStatIdUcast&quot;</span>},
<a name="l00082"></a>00082     {<a class="code" href="group__cosq.html#ggad2513b2cc3002680ce77d18a8b879e1fa8ccf39a2b35c55f6bdacc446acec2dec" title="BST Tracing resource for multicast.">opennslBstStatIdMcast</a>,            <span class="stringliteral">&quot;opennslBstStatIdMcast&quot;</span>},
<a name="l00083"></a>00083     {<a class="code" href="group__cosq.html#ggad2513b2cc3002680ce77d18a8b879e1fa50195b3e9af232ba3d9d0d5b887fc6b2" title="Per Shared Priority Group Pool BST tracing resource.">opennslBstStatIdPriGroupShared</a>,   <span class="stringliteral">&quot;opennslBstStatIdPriGroupShared&quot;</span>},
<a name="l00084"></a>00084     {<a class="code" href="group__cosq.html#ggad2513b2cc3002680ce77d18a8b879e1fa53412ca52b22caeb571d598bdb2bd1c5" title="Per Priority Group Headroom BST tracing resource.">opennslBstStatIdPriGroupHeadroom</a>, <span class="stringliteral">&quot;opennslBstStatIdPriGroupHeadroom&quot;</span>}
<a name="l00085"></a>00085   };
<a name="l00086"></a>00086   <a class="code" href="sal_2types_8h.html#aa3ad64cf41ec3a042bd92550cc6ed308">uint64</a> val[<a class="code" href="example__bst_8c.html#ae561a2dab8025f585c77571f67d4771e">MAX_COUNTERS</a>][<a class="code" href="example__bst_8c.html#a20c3efb1df0911d9071bd4f9bf129acc">MAX_COSQ_COUNT</a>];
<a name="l00087"></a>00087 
<a name="l00088"></a>00088   <span class="comment">/* Intitializing val array */</span>
<a name="l00089"></a>00089   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="example__bst_8c.html#ae561a2dab8025f585c77571f67d4771e">MAX_COUNTERS</a>; i++) {
<a name="l00090"></a>00090     <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="example__bst_8c.html#a20c3efb1df0911d9071bd4f9bf129acc">MAX_COSQ_COUNT</a>; j++) {
<a name="l00091"></a>00091         val[i][j] = 0;
<a name="l00092"></a>00092     }
<a name="l00093"></a>00093   }
<a name="l00094"></a>00094 
<a name="l00095"></a>00095   <span class="keywordflow">if</span> ((argc != 1) || ((argc &gt; 1) &amp;&amp; (strcmp(argv[1], <span class="stringliteral">&quot;--help&quot;</span>) == 0))) {
<a name="l00096"></a>00096     printf(<span class="stringliteral">&quot;%s\n\r&quot;</span>, <a class="code" href="example__bst_8c.html#afc7d01e6dbea2c820a68fb8081c58a89">example_usage</a>);
<a name="l00097"></a>00097     <span class="keywordflow">return</span> <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a8b380efdb47b4a4b0ebafbb1c7823748">OPENNSL_E_PARAM</a>;
<a name="l00098"></a>00098   }
<a name="l00099"></a>00099 
<a name="l00100"></a>00100   <span class="comment">/* Initialize the system. */</span>
<a name="l00101"></a>00101   printf(<span class="stringliteral">&quot;Initializing the system.\r\n&quot;</span>);
<a name="l00102"></a>00102   rc = <a class="code" href="driver_8h.html#a1c3e46e06d91a45608e9839952c60ff2">opennsl_driver_init</a>();
<a name="l00103"></a>00103 
<a name="l00104"></a>00104   <span class="keywordflow">if</span> (rc != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) {
<a name="l00105"></a>00105     printf(<span class="stringliteral">&quot;\r\nFailed to initialize the system, rc = %d (%s).\r\n&quot;</span>,
<a name="l00106"></a>00106            rc, <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rc));
<a name="l00107"></a>00107     <span class="keywordflow">return</span> 0;
<a name="l00108"></a>00108   }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110   <span class="comment">/* Add ports to default vlan. */</span>
<a name="l00111"></a>00111   printf(<span class="stringliteral">&quot;Adding ports to default vlan.\r\n&quot;</span>);
<a name="l00112"></a>00112   rc = <a class="code" href="examples_2util_8h.html#a2d14e4de1f4a7192ac7e378f8f7c63ff" title="Add all ports to default vlan.">example_switch_default_vlan_config</a>(unit);
<a name="l00113"></a>00113   <span class="keywordflow">if</span> (rc != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) {
<a name="l00114"></a>00114     printf(<span class="stringliteral">&quot;\r\nFailed to add default ports, rc = %d (%s).\r\n&quot;</span>,
<a name="l00115"></a>00115            rc, <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rc));
<a name="l00116"></a>00116   }
<a name="l00117"></a>00117 
<a name="l00118"></a>00118   <span class="comment">/* Enabling bst module. */</span>
<a name="l00119"></a>00119   rc = <a class="code" href="group__switch.html#gaecf4eb5e6b57081dc8f06c72919e4e0b" title="Configure port-specific and device-wide operating modes.">opennsl_switch_control_set</a>(unit, <a class="code" href="group__switch.html#gga8465f9bee535c4a0c8e4360bcc21e33ca6cef28f8214d21d47749799eeb840ff2" title="Enable BST tracking.">opennslSwitchBstEnable</a>, 1);
<a name="l00120"></a>00120   <span class="keywordflow">if</span> (rc != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) {
<a name="l00121"></a>00121     printf(<span class="stringliteral">&quot;\r\nFailed to Enable bst, rc = %d (%s).\r\n&quot;</span>,
<a name="l00122"></a>00122            rc, <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rc));
<a name="l00123"></a>00123     <span class="keywordflow">return</span> 0;
<a name="l00124"></a>00124   }
<a name="l00125"></a>00125   printf(<span class="stringliteral">&quot;BST feature is enabled.\r\n&quot;</span>);
<a name="l00126"></a>00126 
<a name="l00127"></a>00127 
<a name="l00128"></a>00128   <span class="keywordflow">while</span> (1) {
<a name="l00129"></a>00129     printf(<span class="stringliteral">&quot;\nUser Menu: Select one of the following options\n&quot;</span>);
<a name="l00130"></a>00130     printf(<span class="stringliteral">&quot;1. Display bst statistics of a port.\n&quot;</span>);
<a name="l00131"></a>00131     printf(<span class="stringliteral">&quot;2. Clear bst statistics of a port.\n&quot;</span>);
<a name="l00132"></a>00132 <span class="preprocessor">#ifndef CDP_EXCLUDE</span>
<a name="l00133"></a>00133 <span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;9. Launch diagnostic shell\n&quot;</span>);
<a name="l00134"></a>00134 <span class="preprocessor">#endif</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;0. Quit the application.\n&quot;</span>);
<a name="l00136"></a>00136 
<a name="l00137"></a>00137     <span class="keywordflow">if</span>(<a class="code" href="examples_2util_8h.html#ad0173c952d5a8af01c14eebabc05b5df" title="Read numeric menu choice from user.">example_read_user_choice</a>(&amp;choice) != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>)
<a name="l00138"></a>00138     {
<a name="l00139"></a>00139         printf(<span class="stringliteral">&quot;Invalid option entered. Please re-enter.\n&quot;</span>);
<a name="l00140"></a>00140         <span class="keywordflow">continue</span>;
<a name="l00141"></a>00141     }
<a name="l00142"></a>00142     <span class="keywordflow">switch</span>(choice) {
<a name="l00143"></a>00143 
<a name="l00144"></a>00144       <span class="keywordflow">case</span> 1:
<a name="l00145"></a>00145       {
<a name="l00146"></a>00146         printf(<span class="stringliteral">&quot;\r\nEnter the port number.\r\n&quot;</span>);
<a name="l00147"></a>00147         <span class="keywordflow">if</span>(<a class="code" href="examples_2util_8h.html#ad0173c952d5a8af01c14eebabc05b5df" title="Read numeric menu choice from user.">example_read_user_choice</a>(&amp;port) != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>)
<a name="l00148"></a>00148         {
<a name="l00149"></a>00149             printf(<span class="stringliteral">&quot;Invalid option entered. Please re-enter.\n&quot;</span>);
<a name="l00150"></a>00150             <span class="keywordflow">continue</span>;
<a name="l00151"></a>00151         }
<a name="l00152"></a>00152         rc = <a class="code" href="group__port.html#gac3b1ddc83dbed38868b5ba256d29cdf7" title="Get the GPORT ID for the specified local port number.">opennsl_port_gport_get</a> (unit, port, &amp;gport);
<a name="l00153"></a>00153         <span class="keywordflow">if</span> (rc != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>)
<a name="l00154"></a>00154         {
<a name="l00155"></a>00155           <span class="keywordflow">return</span> <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5acc22c36dedd5356dfbbf50d38397cca5">OPENNSL_E_FAIL</a>;
<a name="l00156"></a>00156         }
<a name="l00157"></a>00157         <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="example__bst_8c.html#ae561a2dab8025f585c77571f67d4771e">MAX_COUNTERS</a>; index++)
<a name="l00158"></a>00158         {
<a name="l00159"></a>00159           rc = (<a class="code" href="group__cosq.html#ga16395745326578895d5d025000030a07" title="Sync the HW stats value to SW copy for all or given BST resource.">opennsl_cosq_bst_stat_sync</a>(unit, id_list[index].bid));
<a name="l00160"></a>00160           <span class="keywordflow">if</span> (rc != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) {
<a name="l00161"></a>00161             printf(<span class="stringliteral">&quot;\r\nFailed to sync the state of port, rc = %d (%s).\r\n&quot;</span>,
<a name="l00162"></a>00162                    rc, <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rc));
<a name="l00163"></a>00163             <span class="keywordflow">break</span>;
<a name="l00164"></a>00164           }
<a name="l00165"></a>00165         }
<a name="l00166"></a>00166 
<a name="l00167"></a>00167         <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="example__bst_8c.html#ae561a2dab8025f585c77571f67d4771e">MAX_COUNTERS</a>; index++)
<a name="l00168"></a>00168         {
<a name="l00169"></a>00169           <span class="keywordflow">for</span> (cosq = 0; cosq &lt;=7; cosq++)
<a name="l00170"></a>00170           {
<a name="l00171"></a>00171             rc = <a class="code" href="group__cosq.html#gafb618145bceb834e7e0d62622f3174eb" title="Get the current statistic/count of specified BST profile.">opennsl_cosq_bst_stat_get</a>(unit, gport, cosq,
<a name="l00172"></a>00172                 id_list[index].bid, options, &amp;val[index][cosq]);
<a name="l00173"></a>00173             <span class="keywordflow">if</span> (rc != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) {
<a name="l00174"></a>00174               printf(<span class="stringliteral">&quot;\r\nFailed to get the port stats, rc = %d (%s).\r\n&quot;</span>,
<a name="l00175"></a>00175                      rc, <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rc));
<a name="l00176"></a>00176               <span class="keywordflow">break</span>;
<a name="l00177"></a>00177             }
<a name="l00178"></a>00178             printf(<span class="stringliteral">&quot;BST Counter: %s for COS queue: %d is : %llu\n&quot;</span>,
<a name="l00179"></a>00179                 id_list[index].name, cosq, val[index][cosq]);
<a name="l00180"></a>00180           }
<a name="l00181"></a>00181           printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00182"></a>00182         }
<a name="l00183"></a>00183 
<a name="l00184"></a>00184         <span class="keywordflow">break</span>;
<a name="l00185"></a>00185       } <span class="comment">/* End of case 1 */</span>
<a name="l00186"></a>00186 
<a name="l00187"></a>00187       <span class="keywordflow">case</span> 2:
<a name="l00188"></a>00188       {
<a name="l00189"></a>00189         printf(<span class="stringliteral">&quot;\r\nEnter the port number.\r\n&quot;</span>);
<a name="l00190"></a>00190         <span class="keywordflow">if</span>(<a class="code" href="examples_2util_8h.html#ad0173c952d5a8af01c14eebabc05b5df" title="Read numeric menu choice from user.">example_read_user_choice</a>(&amp;port) != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>)
<a name="l00191"></a>00191         {
<a name="l00192"></a>00192             printf(<span class="stringliteral">&quot;Invalid option entered. Please re-enter.\n&quot;</span>);
<a name="l00193"></a>00193             <span class="keywordflow">continue</span>;
<a name="l00194"></a>00194         }
<a name="l00195"></a>00195         rc = <a class="code" href="group__port.html#gac3b1ddc83dbed38868b5ba256d29cdf7" title="Get the GPORT ID for the specified local port number.">opennsl_port_gport_get</a> (unit, port, &amp;gport);
<a name="l00196"></a>00196         <span class="keywordflow">if</span> (rc!= <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>)
<a name="l00197"></a>00197         {
<a name="l00198"></a>00198           <span class="keywordflow">return</span> <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5acc22c36dedd5356dfbbf50d38397cca5">OPENNSL_E_FAIL</a>;
<a name="l00199"></a>00199         }
<a name="l00200"></a>00200 
<a name="l00201"></a>00201         <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="example__bst_8c.html#ae561a2dab8025f585c77571f67d4771e">MAX_COUNTERS</a>; index++)
<a name="l00202"></a>00202         {
<a name="l00203"></a>00203           <span class="keywordflow">for</span> (cosq = 0; cosq &lt;= 7; cosq++)
<a name="l00204"></a>00204           {
<a name="l00205"></a>00205             rc = <a class="code" href="group__cosq.html#ga98ae2a8fe5ee8b19dd7cdae16342de50" title="Clear the current statistic/count of specified BST profile.">opennsl_cosq_bst_stat_clear</a>(unit, gport, cosq,
<a name="l00206"></a>00206                 id_list[index].bid);
<a name="l00207"></a>00207             <span class="keywordflow">if</span> (rc != <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>) {
<a name="l00208"></a>00208               printf(<span class="stringliteral">&quot;\r\nFailed to clear the port stats, rc = %d (%s).\r\n&quot;</span>,
<a name="l00209"></a>00209                      rc, <a class="code" href="group__error.html#ga6d47e9cb22df965b977f3810bdc0ce3e">opennsl_errmsg</a>(rc));
<a name="l00210"></a>00210               <span class="keywordflow">break</span>;
<a name="l00211"></a>00211             }
<a name="l00212"></a>00212           }
<a name="l00213"></a>00213           printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00214"></a>00214         }
<a name="l00215"></a>00215 
<a name="l00216"></a>00216         printf(<span class="stringliteral">&quot;\r\nPort %d stats cleared\r\n&quot;</span>, port);
<a name="l00217"></a>00217         <span class="keywordflow">break</span>;
<a name="l00218"></a>00218       } <span class="comment">/* End of case 2 */</span>
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 <span class="preprocessor">#ifndef CDP_EXCLUDE</span>
<a name="l00221"></a>00221 <span class="preprocessor"></span>      <span class="keywordflow">case</span> 9:
<a name="l00222"></a>00222       {
<a name="l00223"></a>00223         <a class="code" href="driver_8h.html#a471900b16ad87718cd84e257ef98ca57">opennsl_driver_shell</a>();
<a name="l00224"></a>00224         <span class="keywordflow">break</span>;
<a name="l00225"></a>00225       }
<a name="l00226"></a>00226 <span class="preprocessor">#endif</span>
<a name="l00227"></a>00227 <span class="preprocessor"></span>
<a name="l00228"></a>00228       <span class="keywordflow">case</span> 0:
<a name="l00229"></a>00229       {
<a name="l00230"></a>00230         printf(<span class="stringliteral">&quot;Exiting the application.\n&quot;</span>);
<a name="l00231"></a>00231         <span class="keywordflow">return</span> <a class="code" href="group__error.html#ggab4c007d9d8465756b8f672c33764e6d5a549cc71e16fe086c0311d03bc995a11b">OPENNSL_E_NONE</a>;
<a name="l00232"></a>00232       }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234       <span class="keywordflow">default</span> :
<a name="l00235"></a>00235         <span class="keywordflow">break</span>;
<a name="l00236"></a>00236     } <span class="comment">/* End of switch */</span>
<a name="l00237"></a>00237   } <span class="comment">/* End of while */</span>
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <span class="keywordflow">return</span> 0;
<a name="l00240"></a>00240 }
<a name="l00241"></a>00241 <span class="comment">/* __doxy_func_body_end__ */</span>
<a name="l00242"></a>00242 
</pre></div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->


<!--BEGIN GENERATE_TREEVIEW -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->

<hr>
<p>	
<table class="footer-brcm">
	<tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align=left></td>
		<td class="footer-brcm"><small><b>&copy;  2015 by Broadcom Corporation. All rights reserved.</b></small>
			<div class="footer-brcm"><small>Broadcom Corporation reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design. 
Information furnished by Broadcom Corporation is believed to be accurate and reliable. However, Broadcom Corporation does not assume any liability arising 
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license 
under its patent rights nor the rights of others. </small>
			</div>
		</td>
	</tr>
</table>	
</p>	
	

</div>

<!--END GENERATE_TREEVIEW-->





</body>
</html>
